{"version":3,"sources":["scripts/main.js"],"names":["thead","document","querySelector","mainColumn","tBody","tBodyRows","rows","rowsArray","Array","from","sortingOrder","currentColumn","toNumber","stringWithSymbols","parseFloat","replace","sortRow","rowToSort","firstChild","removeChild","forEach","row","appendChild","sortAscDesc","index","addEventListener","e","target","i","children","sort","a","b","numA","cells","innerText","numB","nameA","toLowerCase","nameB","localeCompare","element","classList","remove","length","tagName","parentElement","add","form","createElement","innerHTML","body","fieldValues","querySelectorAll","fieldsArray","preventDefault","Object","newRow","insertRow","fields","name","value","position","office","age","salary","entries","key","pushNotification","field","cell","insertCell","formattedSalary","reset","title","description","type","notification","setAttribute","style","top","right","titleContext","descriptionContext","setTimeout","parentRow","originalText","newInput","handleInput","trim","contains","Number","focus","press"],"mappings":"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","file":"main.2564fc2c.js","sourceRoot":"../src","sourcesContent":["'use strict';\n\nconst thead = document.querySelector('thead');\nconst mainColumn = thead.querySelector('tr');\nconst tBody = document.querySelector('tbody');\nconst tBodyRows = tBody.rows;\nlet rowsArray = Array.from(tBodyRows);\n\nlet sortingOrder = null;\nlet currentColumn = null;\n\nfunction toNumber(stringWithSymbols) {\n  return parseFloat(stringWithSymbols.replace(/[$,]/g, ''));\n}\n\nfunction sortRow(rowToSort) {\n  while (tBody.firstChild) {\n    tBody.removeChild(tBody.firstChild);\n  }\n\n  rowToSort.forEach(row => {\n    tBody.appendChild(row);\n  });\n}\n\nfunction sortAscDesc(index) {\n  if (currentColumn !== index) {\n    sortingOrder = 'asc';\n  } else {\n    sortingOrder = sortingOrder === 'asc' ? 'desc' : 'asc';\n  }\n\n  currentColumn = index;\n}\n\nthead.addEventListener('click', e => {\n  const target = e.target;\n\n  for (let i = 0; i < mainColumn.children.length; i++) {\n    let sortedRows;\n\n    if (target === mainColumn.children[i] && i > 2) {\n      sortAscDesc(i);\n\n      sortedRows = rowsArray.sort((a, b) => {\n        const numA = toNumber(a.cells[i].innerText);\n        const numB = toNumber(b.cells[i].innerText);\n\n        return sortingOrder === 'asc' ? numA - numB : numB - numA;\n      });\n      sortRow(sortedRows);\n    }\n\n    if (target === mainColumn.children[i] && i <= 2) {\n      sortAscDesc(i);\n\n      sortedRows = rowsArray.sort((a, b) => {\n        const nameA = a.cells[i].innerText.toLowerCase();\n        const nameB = b.cells[i].innerText.toLowerCase();\n\n        return sortingOrder === 'asc'\n          ? nameA.localeCompare(nameB)\n          : nameB.localeCompare(nameA);\n      });\n\n      sortRow(sortedRows);\n    }\n\n    rowsArray.forEach((element) => element.classList.remove('active'));\n  }\n}\n);\n\ntBody.addEventListener('click', e => {\n  const target = e.target;\n\n  if (target.tagName === 'TD') {\n    rowsArray.forEach((element) => element.classList.remove('active'));\n    target.parentElement.classList.add('active');\n  }\n\n  rowsArray = Array.from(tBodyRows);\n});\n\nconst form = document.createElement('form');\n\nform.classList.add('new-employee-form');\n\nform.innerHTML\n= '<label>Name: <input name=\"name\" type=\"text\" data-qa=\"name\"></label>'\n+ '<label>Position: <input name=\"position\" type=\"text\" data-qa=\"position\">'\n+ '</label>'\n+ '<label>Office:'\n+ '<select name=\"office\" data-qa=\"office\">'\n+ '<option></option>'\n+ '<option value=\"Tokyo\">Tokyo</option>'\n+ '<option value=\"Singapore\">Singapore</option>'\n+ '<option value=\"London\">London</option>'\n+ '<option value=\"New York\">New York</option>'\n+ '<option value=\"Edinburgh\">Edinburgh</option>'\n+ '<option value=\"San Francisco\">San Francisco</option>'\n+ '</select>'\n+ '</label>'\n+ '<label>Age: <input name=\"age\" type=\"number\" data-qa=\"age\"></label>'\n+ '<label>Salary: <input name=\"salary\" type=\"number\" data-qa=\"salary\"></label>'\n+ '<button>Save to table</button>';\n\ndocument.body.appendChild(form);\n\nconst fieldValues = form.querySelectorAll('[data-qa]');\nconst fieldsArray = [...fieldValues];\n\nform.addEventListener('click', e => {\n  const target = e.target;\n  const button = form.querySelector('button');\n\n  if (target === button) {\n    e.preventDefault();\n\n    const newRow = tBody.insertRow(tBody);\n    const fields = {\n      name: fieldsArray[0].value,\n      position: fieldsArray[1].value,\n      office: fieldsArray[2].value,\n      age: fieldsArray[3].value,\n      salary: fieldsArray[4].value,\n    };\n\n    for (const [key, value] of Object.entries(fields)) {\n      if (!value.length) {\n        pushNotification('Error',\n          'Fill all lines',\n          'error');\n\n        return;\n      }\n\n      if (key === 'name' && value.length < 4) {\n        pushNotification('Name is too short',\n          'Name has to be at least 4 characters',\n          'error');\n\n        return;\n      }\n\n      if (key === 'age' && (value < 18 || value > 90)) {\n        pushNotification('Wrong age',\n          'Age has to be between 18 and 60 years',\n          'error');\n\n        return;\n      }\n    }\n\n    fieldsArray.forEach((field) => {\n      const cell = newRow.insertCell();\n\n      if (field.name === 'salary') {\n        const formattedSalary\n        = '$' + field.value.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n\n        cell.innerText = formattedSalary;\n      } else {\n        cell.innerText = field.value;\n      }\n    });\n\n    pushNotification('Hooray!',\n      'New employee is successfully added to the table',\n      'success');\n\n    rowsArray = Array.from(tBodyRows);\n    form.reset();\n  }\n}\n);\n\nconst pushNotification = (title, description, type) => {\n  const notification = document.createElement('div');\n\n  notification.classList.add('notification');\n  notification.setAttribute('data-qa', 'notification');\n\n  switch (type) {\n    case 'success':\n      notification.classList.add('success');\n      break;\n    case 'error':\n      notification.classList.add('error');\n      break;\n  }\n\n  notification.style.top = `15px`;\n  notification.style.right = `15px`;\n\n  const titleContext = document.createElement('h2');\n\n  titleContext.classList.add('title');\n\n  const descriptionContext = document.createElement('p');\n\n  titleContext.innerText = title;\n  descriptionContext.innerText = description;\n\n  notification.appendChild(titleContext);\n  notification.appendChild(descriptionContext);\n  document.body.appendChild(notification);\n\n  setTimeout(() => {\n    document.body.removeChild(notification);\n  }, 2000);\n};\n\ntBody.addEventListener('dblclick', e => {\n  const target = e.target;\n\n  if (target.tagName === 'TD') {\n    const parentRow = target.parentElement;\n\n    const originalText = target.innerText;\n    const newInput = document.createElement('INPUT');\n\n    const handleInput = function() {\n      if (newInput.value.trim() === '') {\n        target.innerText = originalText;\n      } else {\n        target.innerText = newInput.value;\n      }\n\n      if (newInput.classList.contains('salary')) {\n        target.innerText\n          = '$' + newInput.value.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n      }\n    };\n\n    target.innerText = '';\n    newInput.classList.add('cell-input');\n\n    newInput.value = originalText;\n\n    if (target === parentRow.children[3]) {\n      newInput.setAttribute('type', 'number');\n    }\n\n    if (target === parentRow.children[4]) {\n      newInput.value = Number(originalText.replace(/\\D/g, ''));\n      newInput.setAttribute('type', 'number');\n      newInput.classList.add('salary');\n    }\n\n    target.appendChild(newInput);\n    newInput.focus();\n\n    newInput.addEventListener('blur', () => {\n      handleInput();\n    });\n\n    newInput.addEventListener('keypress', (press) => {\n      if (press.key === 'Enter') {\n        handleInput();\n      }\n    });\n  }\n});\n"]}